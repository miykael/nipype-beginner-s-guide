<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Nipype Beginner&#39;s Guide &mdash; All you need to know to become an expert in Nipype</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="All you need to know to become an expert in Nipype" href="index.html" />
    <link rel="next" title="How To Build A Pipeline For A First Level fMRI Analysis" href="firstLevel.html" />
    <link rel="prev" title="How To Build A Pipeline" href="firstSteps.html" />
    <meta name="keywords" content="nipype, neuroimaging, pipeline, workflow, parallel, python, neuroscience, python, guide, mri, fmri, dti, tutorial, user guide">
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-24958678-1']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>

  </head>
  <body>

    <div class="headertext" >
     <a href="index.html">
        Nipype Beginner's Guide</a>
    </div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="firstLevel.html" title="How To Build A Pipeline For A First Level fMRI Analysis"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="firstSteps.html" title="How To Build A Pipeline"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Home</a>|</li>
        <li><a href="http://miykael.github.com/nipype-beginner-s-guide/tableofcontent.html">Table of Contents</a>|</li>
        <li><a href="http://miykael.github.com/nipype-beginner-s-guide/faq.html">FAQ</a>|</li>
        <li><a href="http://miykael.github.com/nipype-beginner-s-guide/glossary.html">Glossary</a>|</li>
        <li><a href="https://github.com/miykael/nipype-beginner-s-guide/">github</a>|</li>
        <li><a href="http://nipy.org/nipype/">Nipype</a>|</li>
        <li><a href="http://miykael.github.io/nipype-beginner-s-guide/help.html">Help</a>|</li> 
      </ul>
    </div>
  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/nipype-beginners-guide-html_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">How To Visualize A Pipeline</a><ul>
<li><a class="reference internal" href="#what-kind-of-graph-do-you-need">What kind of graph do you need?</a></li>
<li><a class="reference internal" href="#tweak-your-visualization">Tweak your visualization</a></li>
<li><a class="reference internal" href="#examples-of-each-visualization-type">Examples of each visualization type</a><ul>
<li><a class="reference internal" href="#orig-simple-graph"><code class="docutils literal"><span class="pre">orig</span></code> - simple graph</a></li>
<li><a class="reference internal" href="#orig-detailed-graph"><code class="docutils literal"><span class="pre">orig</span></code> - detailed graph</a></li>
<li><a class="reference internal" href="#flat-simple-graph"><code class="docutils literal"><span class="pre">flat</span></code> - simple graph</a></li>
<li><a class="reference internal" href="#flat-detailed-graph"><code class="docutils literal"><span class="pre">flat</span></code> - detailed graph</a></li>
<li><a class="reference internal" href="#exec-simple-graph"><code class="docutils literal"><span class="pre">exec</span></code> - simple graph</a></li>
<li><a class="reference internal" href="#exec-detailed-graph"><code class="docutils literal"><span class="pre">exec</span></code> - detailed graph</a></li>
<li><a class="reference internal" href="#hierarchical-simple-graph"><code class="docutils literal"><span class="pre">hierarchical</span></code> - simple graph</a></li>
<li><a class="reference internal" href="#colored-simple-graph"><code class="docutils literal"><span class="pre">colored</span></code> - simple graph</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="firstSteps.html"
                        title="previous chapter">How To Build A Pipeline</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="firstLevel.html"
                        title="next chapter">How To Build A Pipeline For A First Level fMRI Analysis</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/visualizePipeline.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">

            <!-- Disqus counter -->
            
  <div class="section" id="how-to-visualize-a-pipeline">
<h1>How To Visualize A Pipeline<a class="headerlink" href="#how-to-visualize-a-pipeline" title="Permalink to this headline">¶</a></h1>
<p>The option to visualize your workflow is a great feature of Nipype. It allows you to see your analysis in one piece, control the connections between the nodes and check which input and output fields are connected.</p>
<div class="section" id="what-kind-of-graph-do-you-need">
<h2>What kind of graph do you need?<a class="headerlink" href="#what-kind-of-graph-do-you-need" title="Permalink to this headline">¶</a></h2>
<p>You can visualize your pipeline as soon as you have a workflow that contains any nodes and connections between them. To create a graph, simply use the function <code class="docutils literal"><span class="pre">write_graph()</span></code> on your workflow:</p>
<div class="highlight-py"><div class="highlight"><pre><span class="n">workflow</span><span class="o">.</span><span class="n">write_graph</span><span class="p">(</span><span class="n">graph2use</span><span class="o">=</span><span class="s1">&#39;flat&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Nipype can create five different kinds of graphs by setting the variable <code class="docutils literal"><span class="pre">graph2use</span></code> to the following parameters:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">orig</span></code> shows only the main workflows and omits any subworkflows</li>
<li><code class="docutils literal"><span class="pre">flat</span></code> shows all workflows, including any subworkflows</li>
<li><code class="docutils literal"><span class="pre">exec</span></code> shows all workflows, including subworkflows and expands iterables into subgraphs</li>
<li><code class="docutils literal"><span class="pre">hierarchical</span></code> shows all workflows, including subworkflows and also shows the hierarchical structure</li>
<li><code class="docutils literal"><span class="pre">colored</span></code> gives you the same output as <code class="docutils literal"><span class="pre">hierarchical</span></code> but color codes the different levels and the connections within those levels according to their hierarchical depth.</li>
</ul>
<p>All types, except hierarchical and colored, create two graph files. The difference of those two files is in the level of detail they show. There is a <strong>simple overview graph</strong> called <code class="docutils literal"><span class="pre">graph.dot</span></code> which gives you the basic connections between nodes and a <strong>more detailed overview graph</strong> called <code class="docutils literal"><span class="pre">graph_detailed.dot</span></code> which additionally gives you the output and input fields of each node and the connections between them. The <strong>hierarchical</strong> and <strong>colored graph</strong> on the other side create only a simple overview graph. I mostly use <strong>colored</strong> graphs, as it gives you a fast and clear picture of your workflow structure.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The <code class="docutils literal"><span class="pre">graph</span></code> files can be found in the highest pipeline folder of your working directory.</p>
<p class="last">If graphviz is installed the dot files will automatically be converted into png-files. If not, take and load the dot files in any graphviz visualizer of your choice.</p>
</div>
</div>
<div class="section" id="tweak-your-visualization">
<h2>Tweak your visualization<a class="headerlink" href="#tweak-your-visualization" title="Permalink to this headline">¶</a></h2>
<p>There are two additional parameters <code class="docutils literal"><span class="pre">format</span></code> and <code class="docutils literal"><span class="pre">simple_form</span></code> that you can use to change your output graph. <code class="docutils literal"><span class="pre">format</span></code> can be used to change the output format of the image file to either <code class="docutils literal"><span class="pre">png</span></code> or <code class="docutils literal"><span class="pre">svg</span></code>. <code class="docutils literal"><span class="pre">simple_form</span></code> determines if the node name shown in the visualization is either of the form <code class="docutils literal"><span class="pre">nodename</span> <span class="pre">(package)</span></code> when set to <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">nodename.Class.package</span></code> when set to <code class="docutils literal"><span class="pre">False</span></code>.</p>
<div class="highlight-py"><div class="highlight"><pre><span class="n">workflow</span><span class="o">.</span><span class="n">write_graph</span><span class="p">(</span><span class="n">graph2use</span><span class="o">=</span><span class="s1">&#39;colored&#39;</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;svg&#39;</span><span class="p">,</span> <span class="n">simple_form</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>To illustrate, on the left you can see a simple graph of the visualization type <strong>orig</strong> when <code class="docutils literal"><span class="pre">simple_form</span></code> is set to <code class="docutils literal"><span class="pre">True</span></code> and on the right if it is set to <code class="docutils literal"><span class="pre">False</span></code>.</p>
<a class="reference internal image-reference" href="_images/graph_orig_simple.svg"><img height="250pt" src="_images/graph_orig_simple.svg" /></a>
<a class="reference internal image-reference" href="_images/graph_orig_notsimple.svg"><img height="250pt" src="_images/graph_orig_notsimple.svg" /></a>
</div>
<div class="section" id="examples-of-each-visualization-type">
<h2>Examples of each visualization type<a class="headerlink" href="#examples-of-each-visualization-type" title="Permalink to this headline">¶</a></h2>
<p>The graphs shown below are visualizations of the <strong>first level analysis pipeline</strong> or <code class="docutils literal"><span class="pre">metaflow</span></code> from the section: <a class="reference external" href="http://miykael.github.io/nipype-beginner-s-guide/firstLevel.html">How To Build A First Level Pipeline</a></p>
<div class="section" id="orig-simple-graph">
<h3><code class="docutils literal"><span class="pre">orig</span></code> - simple graph<a class="headerlink" href="#orig-simple-graph" title="Permalink to this headline">¶</a></h3>
<p>The simple graph of the visualization type <code class="docutils literal"><span class="pre">orig</span></code> shows only the top layer, i.e. hierarchical highest workflows and nodes, of your workflow. In this case this is the <code class="docutils literal"><span class="pre">metaflow</span></code>.  Subworkflows such as <code class="docutils literal"><span class="pre">preproc</span></code> and <code class="docutils literal"><span class="pre">l1analysis1</span></code> are represented by a single node.</p>
<a class="reference internal image-reference" href="_images/graph_orig_simple.svg"><div align="center" class="align-center"><img src="_images/graph_orig_simple.svg" width="300pt" /></div>
</a>
</div>
<div class="section" id="orig-detailed-graph">
<h3><code class="docutils literal"><span class="pre">orig</span></code> - detailed graph<a class="headerlink" href="#orig-detailed-graph" title="Permalink to this headline">¶</a></h3>
<p>The detailed graph of the visualization type <code class="docutils literal"><span class="pre">orig</span></code> shows the <code class="docutils literal"><span class="pre">metaflow</span></code> to the same depth as the simple version above, but with a bit more information about input and output fields. Now you can see which output of which node is connected to which input of the following node.</p>
<a class="reference internal image-reference" href="_images/graph_orig_detailed.svg"><div align="center" class="align-center"><img src="_images/graph_orig_detailed.svg" width="600pt" /></div>
</a>
</div>
<div class="section" id="flat-simple-graph">
<h3><code class="docutils literal"><span class="pre">flat</span></code> - simple graph<a class="headerlink" href="#flat-simple-graph" title="Permalink to this headline">¶</a></h3>
<p>The simple graph of the visualization type <code class="docutils literal"><span class="pre">flat</span></code> shows all nodes of a workflow. As you can see, subworkflows such as <code class="docutils literal"><span class="pre">preproc</span></code> and <code class="docutils literal"><span class="pre">l1analysis1</span></code> are now expanded and represented by all their containing nodes.</p>
<a class="reference internal image-reference" href="_images/graph_flat_simple.svg"><div align="center" class="align-center"><img src="_images/graph_flat_simple.svg" width="600pt" /></div>
</a>
</div>
<div class="section" id="flat-detailed-graph">
<h3><code class="docutils literal"><span class="pre">flat</span></code> - detailed graph<a class="headerlink" href="#flat-detailed-graph" title="Permalink to this headline">¶</a></h3>
<p>The detailed graph of the visualization type <code class="docutils literal"><span class="pre">flat</span></code> shows the <code class="docutils literal"><span class="pre">metaflow</span></code> in all its glory. This graph shows all nodes, their inputs and outputs and how they are connected to each other.</p>
<a class="reference internal image-reference" href="_images/graph_flat_detailed.svg"><div align="center" class="align-center"><img src="_images/graph_flat_detailed.svg" width="600pt" /></div>
</a>
</div>
<div class="section" id="exec-simple-graph">
<h3><code class="docutils literal"><span class="pre">exec</span></code> - simple graph<a class="headerlink" href="#exec-simple-graph" title="Permalink to this headline">¶</a></h3>
<p>The detailed graph of the visualization type <code class="docutils literal"><span class="pre">exec</span></code> doesn&#8217;t really show you anything different than the simple graph of the visualization type <code class="docutils literal"><span class="pre">flat</span></code>. The advantage of the <code class="docutils literal"><span class="pre">exec</span></code> type lies in the detailed graph.</p>
<a class="reference internal image-reference" href="_images/graph_exec_simple.svg"><div align="center" class="align-center"><img src="_images/graph_exec_simple.svg" width="600pt" /></div>
</a>
</div>
<div class="section" id="exec-detailed-graph">
<h3><code class="docutils literal"><span class="pre">exec</span></code> - detailed graph<a class="headerlink" href="#exec-detailed-graph" title="Permalink to this headline">¶</a></h3>
<p>The detailed graph of the visualization type <code class="docutils literal"><span class="pre">exec</span></code> shows you the nodes of the <code class="docutils literal"><span class="pre">metaflow</span></code> with the same details as the visualization type <code class="docutils literal"><span class="pre">flat</span></code> would do. But additionally, all iterables are expanded so that you can see the full hierarchical and parallel structure of your analysis. In the following example the node <code class="docutils literal"><span class="pre">selectfiles</span></code> iterates over <code class="docutils literal"><span class="pre">sub001</span></code>, <code class="docutils literal"><span class="pre">sub002</span></code> and <code class="docutils literal"><span class="pre">sub003</span></code>.</p>
<a class="reference internal image-reference" href="_images/graph_exec_detailed.svg"><div align="center" class="align-center"><img src="_images/graph_exec_detailed.svg" width="600pt" /></div>
</a>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As you can see from this example, every iteration creates a subgraph with its own index. In this case <code class="docutils literal"><span class="pre">a0</span></code>, <code class="docutils literal"><span class="pre">a1</span></code> and <code class="docutils literal"><span class="pre">a2</span></code>. Such an indexing structure is also maintained in the folders and subfolders of your working and output directory.</p>
</div>
</div>
<div class="section" id="hierarchical-simple-graph">
<h3><code class="docutils literal"><span class="pre">hierarchical</span></code> - simple graph<a class="headerlink" href="#hierarchical-simple-graph" title="Permalink to this headline">¶</a></h3>
<p>The graph of the visualization type <code class="docutils literal"><span class="pre">hierarchical</span></code> shows the <code class="docutils literal"><span class="pre">metaflow</span></code> as seen with the visualization type <code class="docutils literal"><span class="pre">flat</span></code> but emphasizes the hierarchical structure of its subworkflows. This is done by surrounding each subworkflow with a box labeled with the name of the subworkflow. Additionally, each node with an iterable field will be shown as a gray box.</p>
<a class="reference internal image-reference" href="_images/graph_hierarchical.svg"><div align="center" class="align-center"><img src="_images/graph_hierarchical.svg" width="600pt" /></div>
</a>
<p>In this example you see that the <code class="docutils literal"><span class="pre">metaflow</span></code> contains a <code class="docutils literal"><span class="pre">preproc</span></code> and a <code class="docutils literal"><span class="pre">l1analysis</span></code> workflow.</p>
</div>
<div class="section" id="colored-simple-graph">
<h3><code class="docutils literal"><span class="pre">colored</span></code> - simple graph<a class="headerlink" href="#colored-simple-graph" title="Permalink to this headline">¶</a></h3>
<p>The graph of the visualization type <code class="docutils literal"><span class="pre">colored</span></code> shows the <code class="docutils literal"><span class="pre">metaflow</span></code> as seen with the visualization type <code class="docutils literal"><span class="pre">hierarchical</span></code> but color codes the different <code class="docutils literal"><span class="pre">hierarchical</span></code> levels as well as the connections between and within those levels with different colors.</p>
<a class="reference internal image-reference" href="_images/graph_colored.svg"><div align="center" class="align-center"><img src="_images/graph_colored.svg" width="600pt" /></div>
</a>
</div>
</div>
</div>

   


          </div>
        </div>
      </div>

      <!-- Disqus message -->
      <div id="disqus_thread"></div>
      <script type="text/javascript">
          /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
          var disqus_shortname = 'nipypebeginnersguide'; // required: replace example with your forum shortname
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="firstLevel.html" title="How To Build A Pipeline For A First Level fMRI Analysis"
             >next</a></li>
        <li class="right" >
          <a href="firstSteps.html" title="How To Build A Pipeline"
             >previous</a> |</li>
        <li><a href="index.html">Home</a>|</li>
        <li><a href="http://miykael.github.com/nipype-beginner-s-guide/tableofcontent.html">Table of Contents</a>|</li>
        <li><a href="http://miykael.github.com/nipype-beginner-s-guide/faq.html">FAQ</a>|</li>
        <li><a href="http://miykael.github.com/nipype-beginner-s-guide/glossary.html">Glossary</a>|</li>
        <li><a href="https://github.com/miykael/nipype-beginner-s-guide/">github</a>|</li>
        <li><a href="http://nipy.org/nipype/">Nipype</a>|</li>
        <li><a href="http://miykael.github.io/nipype-beginner-s-guide/help.html">Help</a>|</li> 
      </ul>
    </div>
    <div class="footer">
    <p>
        &copy; Copyright 2016, Michael Notter.
      Last updated on February 22, 2016.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.5.
    </p>
    <p>
    This page uses <a href="http://analytics.google.com/">Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
    </p>
    </div>
  </body>
</html>