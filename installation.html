<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Nipype Beginner&#39;s Guide &mdash; All you need to know to become an expert in Nipype</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="All you need to know to become an expert in Nipype" href="index.html" />
    <link rel="next" title="Prepare your Dataset" href="prepareData.html" />
    <link rel="prev" title="Nipype and Neuroimaging" href="nipypeAndNeuroimaging.html" />
    <meta name="keywords" content="nipype, neuroimaging, pipeline, workflow, parallel, python, neuroscience, python, guide, mri, fmri, dti, tutorial, user guide">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-24958678-1', 'auto');
      ga('send', 'pageview');

    </script>

  </head>
  <body>

    <div class="headertext" >
     <a href="index.html">
        Nipype Beginner's Guide</a>
    </div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="prepareData.html" title="Prepare your Dataset"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="nipypeAndNeuroimaging.html" title="Nipype and Neuroimaging"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Home</a>|</li>
        <li><a href="http://miykael.github.com/nipype-beginner-s-guide/tableofcontent.html">Table of Contents</a>|</li>
        <li><a href="http://miykael.github.com/nipype-beginner-s-guide/faq.html">FAQ</a>|</li>
        <li><a href="http://miykael.github.com/nipype-beginner-s-guide/glossary.html">Glossary</a>|</li>
        <li><a href="https://github.com/miykael/nipype-beginner-s-guide/">github</a>|</li>
        <li><a href="http://nipy.org/nipype/">Nipype</a>|</li>
        <li><a href="http://miykael.github.io/nipype-beginner-s-guide/help.html">Help</a>|</li> 
      </ul>
    </div>
  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/nipype-beginners-guide-html_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Download and Install Nipype</a><ul>
<li><a class="reference internal" href="#prepare-your-system">Prepare your System</a></li>
<li><a class="reference internal" href="#anaconda">Anaconda</a><ul>
<li><a class="reference internal" href="#install-anaconda">Install Anaconda</a></li>
<li><a class="reference internal" href="#update-anaconda">Update Anaconda</a></li>
<li><a class="reference internal" href="#test-anaconda">Test Anaconda</a></li>
</ul>
</li>
<li><a class="reference internal" href="#neurodebian">NeuroDebian</a></li>
<li><a class="reference internal" href="#nipype">Nipype</a><ul>
<li><a class="reference internal" href="#install-nipype">Install Nipype</a></li>
<li><a class="reference internal" href="#install-pyhon-dependencies">Install Pyhon Dependencies</a></li>
<li><a class="reference internal" href="#test-nipype">Test Nipype</a></li>
<li><a class="reference internal" href="#upgrade-nipype-and-other-python-dependencies">Upgrade Nipype (and other python dependencies)</a></li>
<li><a class="reference internal" href="#upgrade-nipype-to-the-developer-version">Upgrade Nipype to the developer version</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#download-and-install-interfaces">Download and Install Interfaces</a><ul>
<li><a class="reference internal" href="#fsl">FSL</a><ul>
<li><a class="reference internal" href="#download-and-installation">Download and Installation</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#test-fsl">Test FSL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#freesurfer">FreeSurfer</a><ul>
<li><a class="reference internal" href="#id6">Download and Installation</a></li>
<li><a class="reference internal" href="#test-freesurfer">Test FreeSurfer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#matlab">MATLAB</a></li>
<li><a class="reference internal" href="#spm12">SPM12</a><ul>
<li><a class="reference internal" href="#id13">Download and Installation</a></li>
<li><a class="reference internal" href="#test-spm12">Test SPM12</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ants">ANTs</a></li>
<li><a class="reference internal" href="#afni">AFNI</a></li>
<li><a class="reference internal" href="#additional-interfaces">Additional interfaces</a></li>
</ul>
</li>
<li><a class="reference internal" href="#clean-up-your-system">Clean up your System</a></li>
<li><a class="reference internal" href="#test-your-system">Test your System</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="nipypeAndNeuroimaging.html"
                        title="previous chapter">Nipype and Neuroimaging</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="prepareData.html"
                        title="next chapter">Prepare your Dataset</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/installation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">

            
  <div class="admonition important">
<p class="admonition-title">Important</p>
<p>This guide hasn’t been updated since January 2017 and is based on an older version of Nipype. The code in this guide is not tested against newer Nipype versions and might not work anymore. For a newer, more up to date and better introduction to Nipype, please check out the the <a class="reference external" href="https://miykael.github.io/nipype_tutorial/">Nipype Tutorial</a>.</p>
</div>
<div class="section" id="download-and-install-nipype">
<h1>Download and Install Nipype<a class="headerlink" href="#download-and-install-nipype" title="Permalink to this headline">¶</a></h1>
<p>All you need to know to download and install Nipype can be found on the official homepage under <a class="reference external" href="http://nipype.readthedocs.io/en/latest/users/install.html">Download and Install</a>. There you find a link to the newest version and more information about which dependencies are necessary or recommended.</p>
<p>Installing Nipype as described on the official homepage should be rather easy for most users. There are some tricky steps that sometimes seem to be less straight forward. But don’t worry, I’ve written my own installation guide to help and assist users with less UNIX experience. The following instructions hopefully help everybody to install and run Nipype on their system. Note that some steps strongly depend on the system you are using and it might be possible that some dependencies are already installed on your system. Also,</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is highly recommended to run Nipype on a machine with either a Mac or Linux OS, as most dependencies such as FSL or FreeSurfer don’t run on Windows. If you have a Windows machine, I recommend you to install <a class="reference external" href="http://www.ubuntu.com/download/desktop">Ubuntu</a> on your system.</p>
</div>
<p>The following steps describe how I was able to set up and run Nipype on a System with a newly installed Ubuntu 14.04 LTS OS (64-bit), called “<cite>trusty</cite>”. To people with older Ubuntu version, don’t worry, Nipype does also run on much older versions, as long as they are not too ancient. To check which version of Ubuntu you are running use the command <code class="docutils literal notranslate"><span class="pre">lsb_release</span> <span class="pre">-d</span></code>. You don’t have to upgrade to version 14.04 if you have an older version as long as it isn’t too ancient.</p>
<p><strong>To Mac Users</strong>: I haven’t installed Nipype on a Mac, yet. But the steps should be almost identical. If any major differences occur, please let me know.</p>
<div class="section" id="prepare-your-system">
<h2>Prepare your System<a class="headerlink" href="#prepare-your-system" title="Permalink to this headline">¶</a></h2>
<p>Before we start, make sure that your Ubuntu system is up to date with the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#Update and upgrade your system</span>
sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get upgrade
</pre></div>
</div>
</div>
<div class="section" id="anaconda">
<h2>Anaconda<a class="headerlink" href="#anaconda" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="_images/logoAnaconda.png"><img alt="_images/logoAnaconda.png" class="align-left" src="_images/logoAnaconda.png" style="width: 90pt;" /></a>
<p>As you can see under <a class="reference external" href="http://nipype.readthedocs.io/en/latest/users/install.html#recommended-software">Dependencies</a>, there are a lot of software packages that have to be installed on your system to run Nipype. For example: <cite>python</cite>, <cite>ipython</cite>, <cite>matplotlib</cite>, <cite>networkx</cite>, <cite>numpy</cite>, <cite>scipy</cite>, <cite>sphinx</cite> etc. Luckily, most of the those required dependencies, most importantly a working Python environment, can be set up by installing <a class="reference external" href="https://www.continuum.io/downloads">Anaconda</a>.</p>
<div class="section" id="install-anaconda">
<h3>Install Anaconda<a class="headerlink" href="#install-anaconda" title="Permalink to this headline">¶</a></h3>
<p>Instructions on how to install Anaconda can be found on the <a class="reference external" href="http://docs.continuum.io/anaconda/install">official homepage</a>. Following are the steps how I’ve installed the Anaconda package on my system:</p>
<ol class="arabic">
<li><p>Download the software under <a class="reference external" href="https://www.continuum.io/downloads">https://www.continuum.io/downloads</a> and move the downloaded sh-file to your Download folder. In my case this folder is at <code class="docutils literal notranslate"><span class="pre">/home/username/Downloads</span></code> abbreviated with <code class="docutils literal notranslate"><span class="pre">~/Downloads</span></code>.</p></li>
<li><p>Install the downloaded sh-file with the following command:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>bash ~/Downloads/Anaconda-2.1.0-Linux-x86_64.sh
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Specify the location of the installation (default is ok).</p></li>
<li><p>Add the anaconda binary directory to your PATH environment variable. This path is automatically added if you answer the question <cite>“Do you wish the installer to prepend the Anaconda install location to PATH in your /home/username/.bashrc ? [yes|no]”</cite> with yes. Otherwise, add the following line to your <cite>.bashrc</cite> file:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/home/username/anaconda/bin:<span class="nv">$PATH</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> is read and executed whenever you run bash using an interactive shell, i.e. the terminal. This file usually is stored in your home folder at <code class="docutils literal notranslate"><span class="pre">/home/username/.bashrc</span></code> or in other words <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code>. The <code class="docutils literal notranslate"><span class="pre">export</span></code> command tells your system to export a variables from the specified package so that they can be used inside the current shell. For example, <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">PATH=/home/somepath:$PATH</span></code> inserts <code class="docutils literal notranslate"><span class="pre">/home/somepath</span></code> to the beginning of the variable PATH and exports it.</p>
</div>
</div>
<div class="section" id="update-anaconda">
<h3>Update Anaconda<a class="headerlink" href="#update-anaconda" title="Permalink to this headline">¶</a></h3>
<p>To update anaconda to the newest version and to clean unused and older content use the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>conda update conda <span class="o">&amp;&amp;</span> conda update anaconda <span class="o">&amp;&amp;</span> conda clean --packages --tarballs
</pre></div>
</div>
<p>Now make sure that you have all Nipype required dependencies up to date with the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>conda update python ipython ipython-notebook matplotlib <span class="se">\</span>
             networkx numpy scipy sphinx traits dateutil nose pydot
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To update a software package in anaconda use the command “conda update packagename”. For example, if you want to update python use “conda update python”</p>
</div>
</div>
<div class="section" id="test-anaconda">
<h3>Test Anaconda<a class="headerlink" href="#test-anaconda" title="Permalink to this headline">¶</a></h3>
<p>Now that Anaconda is installed let’s test if our python environment is ready to run.</p>
<ol class="arabic">
<li><p>Open a new terminal and type in the command <code class="docutils literal notranslate"><span class="pre">ipython</span></code>. This should bring you to the IPython environment. IPython is used to run all your python scripts. Fore more information about Python and IPython see the <a class="reference external" href="http://miykael.github.io/nipype-beginner-s-guide/links.html">support section</a> of this beginner’s guide.</p></li>
<li><p>To check if everything is set up correctly try to import numpy with the following command:</p>
<blockquote>
<div><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<p>If you see no <cite>ImportError</cite> message, everything is fine and we can get on to the next step.</p>
</div>
</div>
<div class="section" id="neurodebian">
<h2>NeuroDebian<a class="headerlink" href="#neurodebian" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="_images/logoNeurodebian.png"><img alt="_images/logoNeurodebian.png" class="align-left" src="_images/logoNeurodebian.png" style="width: 70pt;" /></a>
<p>To facilitate the installation of some necessary and recommended software packages such as FSL and Nipype itself, Debian and Ubuntu based system should install the <a class="reference external" href="http://neuro.debian.net/">NeuroDebian</a> repository. To see which software packages are included in NeuroDebian, go to <a class="reference external" href="http://www.nitrc.org/projects/neurodebian/">NITRCT - NeuroDebian</a>.</p>
<ol class="arabic">
<li><p>To install NeuroDebian on your System go to the <a class="reference external" href="http://neuro.debian.net/#get-neurodebian">Get NeuroDebian</a> and select the operating system and the server you want to use. In my case, the operating system is <cite>‘Ubuntu 14.04 “Trusty Tahr” (trusty)’</cite>. If you have an Ubuntu OS but don’t know which version, just type <cite>lsb_release -a</cite> in the terminal and it will show you.</p></li>
<li><p>Chose the option “All software”</p></li>
<li><p>Now you should see two lines of command. In my case they were the following:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>wget -O- http://neuro.debian.net/lists/trusty.de-md.full <span class="p">|</span> sudo tee /etc/apt/sources.list.d/neurodebian.sources.list
sudo apt-key adv --recv-keys --keyserver pgp.mit.edu 2649A5A9
</pre></div>
</div>
</div></blockquote>
<p>Run those two lines of code in your terminal.</p>
</li>
<li><p>After all this is done, update your system with the following command: <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">update</span></code></p></li>
</ol>
<p>Now you are read to install Nipype, FSL, AFNI and more.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have problem with the <code class="docutils literal notranslate"><span class="pre">wget</span></code> command in the 3rd step it is most likely because of the root permission (the sudo command in the second half of the command). When the wget command seems to halt and do nothing type in your password and it should go on.</p>
</div>
</div>
<div class="section" id="nipype">
<h2>Nipype<a class="headerlink" href="#nipype" title="Permalink to this headline">¶</a></h2>
<div class="section" id="install-nipype">
<h3>Install Nipype<a class="headerlink" href="#install-nipype" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="_images/logoNipype.png"><img alt="_images/logoNipype.png" class="align-right" src="_images/logoNipype.png" style="width: 100pt;" /></a>
<p>Finally, it’s time to install Nipype. There are multiple ways how you can install Nipype, but assuming that you installed anaconda beforehand, the easiest way to install Nipype is by using conda. To do this you need to add the channel <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> to your channels:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">config</span> <span class="pre">--add</span> <span class="pre">channels</span> <span class="pre">conda-forge</span></code></p>
</div></blockquote>
<p>Once the conda-forge channel has been enabled, nipype can be installed with:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">nipype</span></code></p>
</div></blockquote>
<p>As an alternative, you could also install Nipype with either <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">git+https://github.com/nipy/nipype#egg=nipype</span></code> or <code class="docutils literal notranslate"><span class="pre">easy_install</span> <span class="pre">nipype</span></code>. For more information about the installation from sourcecode, go to the <a class="reference external" href="http://nipype.readthedocs.io/en/latest/users/install.html">main page</a>.</p>
</div>
<div class="section" id="install-pyhon-dependencies">
<h3>Install Pyhon Dependencies<a class="headerlink" href="#install-pyhon-dependencies" title="Permalink to this headline">¶</a></h3>
<p>There are a few additional python dependencies that you cannot install via anaconda, such as: nibabel, rdflib, nipy, dipy and graphviz. To install those, use the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#Install packages with pip</span>
pip install nibabel rdflib nipy dipy

<span class="c1">#Install graphviz and pygraphviz separately</span>
sudo apt-get install graphviz libgraphviz-dev
pip install --upgrade pygraphviz graphviz
</pre></div>
</div>
</div>
<div class="section" id="test-nipype">
<h3>Test Nipype<a class="headerlink" href="#test-nipype" title="Permalink to this headline">¶</a></h3>
<p>To test if everything worked fine and if you’re able to use Nipype go into an IPython environment and import nipype with the command: <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">nipype</span></code>. If you see no <cite>ImportError</cite> message, everything is set up correctly.</p>
</div>
<div class="section" id="upgrade-nipype-and-other-python-dependencies">
<h3>Upgrade Nipype (and other python dependencies)<a class="headerlink" href="#upgrade-nipype-and-other-python-dependencies" title="Permalink to this headline">¶</a></h3>
<p>If you want to be sure that you have the newest version or update a certain package use the <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> command with the flag <code class="docutils literal notranslate"><span class="pre">--upgrade</span></code>. So, if you want to upgrade Nipype to the newest version use the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pip install --upgrade nipype
</pre></div>
</div>
<p>If you want to upgrade all other required python dependencies as well use the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pip install --upgrade nibabel nipype rdflib nipy dipy pygraphviz graphviz
</pre></div>
</div>
</div>
<div class="section" id="upgrade-nipype-to-the-developer-version">
<h3>Upgrade Nipype to the developer version<a class="headerlink" href="#upgrade-nipype-to-the-developer-version" title="Permalink to this headline">¶</a></h3>
<p>If you want or have to upgrade Nipype to the developer version us the following steps. Such an upgrade is only recommended to people who know what they are doing or need a certain fix that isn’t distributed yet in the general Nipype version.</p>
<p>The most current developer version of Nipype can be found on <a class="reference external" href="https://github.com/">GitHub</a> under <a class="reference external" href="https://github.com/nipy/nipype">Nipype &#64; GitHub</a>. The following steps assume assume that you’ve already set up your own GitHub account and are ready to download the Nipype repository:</p>
<ol class="arabic">
<li><p>First, open a terminal and download the Nipype repository at the current location with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/nipy/nipype.git</span></code>, or download the repository directly by using <a class="reference external" href="https://codeload.github.com/nipy/nipype/zip/master">this link</a>.</p></li>
<li><p>The just downloaded nipype folder contains another folder called <code class="docutils literal notranslate"><span class="pre">nipype</span></code>. This is the folder that contains the newest version of Nipype.</p></li>
<li><p>Now, either add the path to this folder to the <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> list (make sure that <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> only contains one Nipype folder) or delete the current nipype folder and move the new github <code class="docutils literal notranslate"><span class="pre">nipype</span></code> folder to this location. This can be done with the following command:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rm -rf ~/anaconda/lib/python2.7/site-packages/nipype
cp -R ~/Downloads/nipype/nipype ~/anaconda/lib/python2.7/site-packages/nipype
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you haven’t set up a GitHub account yet but don’t know how to set everything up, see this link: <a class="reference external" href="https://help.github.com/articles/set-up-git">Set Up Git</a>.</p>
</div>
</div>
</div>
</div>
<div class="section" id="download-and-install-interfaces">
<h1>Download and Install Interfaces<a class="headerlink" href="#download-and-install-interfaces" title="Permalink to this headline">¶</a></h1>
<div class="section" id="fsl">
<h2>FSL<a class="headerlink" href="#fsl" title="Permalink to this headline">¶</a></h2>
<div class="section" id="download-and-installation">
<h3>Download and Installation<a class="headerlink" href="#download-and-installation" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="_images/logoFSL.jpg"><img alt="_images/logoFSL.jpg" class="align-left" src="_images/logoFSL.jpg" style="width: 70pt;" /></a>
<p><a class="reference external" href="http://fsl.fmrib.ox.ac.uk/fsl/fslwiki/">FSL</a> is a comprehensive library of analysis tools for fMRI, MRI and DTI data. An overview of FSL’s tools can be found on their homepage under <a class="reference external" href="http://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FslOverview">FSL Overview</a>.</p>
<p>The installation of FSL is simple if you’ve already installed the NeuroDebian repository.</p>
<p>Just run the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo apt-get install fsl
</pre></div>
</div>
<p>Otherwise, go through the official <a class="reference external" href="http://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FslInstallation">FSL installation guide</a>.</p>
</div>
<div class="section" id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>Before you can run FSL, your system first needs to know where the software is installed at. On a ubuntu system, this is usually under <code class="docutils literal notranslate"><span class="pre">/usr/share/fsl</span></code>. Therefore, add the following code to your <cite>.bashrc</cite> file. (To open and edit your <cite>.bashrc</cite> file on Ubuntu, us the following command: <code class="docutils literal notranslate"><span class="pre">gedit</span> <span class="pre">~/.bashrc</span></code>)</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#FSL</span>
<span class="nv">FSLDIR</span><span class="o">=</span>/usr/share/fsl
. <span class="si">${</span><span class="nv">FSLDIR</span><span class="si">}</span>/5.0/etc/fslconf/fsl.sh
<span class="nv">PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">FSLDIR</span><span class="si">}</span>/5.0/bin:<span class="si">${</span><span class="nv">PATH</span><span class="si">}</span>
<span class="nb">export</span> FSLDIR PATH
</pre></div>
</div>
</div>
<div class="section" id="test-fsl">
<h3>Test FSL<a class="headerlink" href="#test-fsl" title="Permalink to this headline">¶</a></h3>
<p>To test if FSL is correctly installed, open a new terminal and type in the command <code class="docutils literal notranslate"><span class="pre">fsl</span></code>. If everything was set up correctly you should see the FSL GUI with the version number in the header. In my case this is version 5.0.7.</p>
</div>
</div>
<div class="section" id="freesurfer">
<h2>FreeSurfer<a class="headerlink" href="#freesurfer" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="_images/logoFreeSurfer.jpg"><img alt="_images/logoFreeSurfer.jpg" class="align-left" src="_images/logoFreeSurfer.jpg" style="height: 55pt;" /></a>
<p><a class="reference external" href="http://surfer.nmr.mgh.harvard.edu/">FreeSurfer</a> is an open source software suite for processing and analyzing (human) brain MRI images. The installation of <a class="reference external" href="http://surfer.nmr.mgh.harvard.edu/">FreeSurfer</a> includes abit more steps than the other installations, but the official <a class="reference external" href="http://surfer.nmr.mgh.harvard.edu/fswiki/DownloadAndInstall">FreeSurfer: Download and Install</a> homepage is written very well and should get you through it without any problem. Nonetheless, following are the steps how I’ve installed FreeSurfer on my system.</p>
<div class="section" id="id6">
<h3>Download and Installation<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Go to <a class="reference external" href="http://surfer.nmr.mgh.harvard.edu/fswiki/Download">FreeSurfer: Download</a> and download the corresponding version for your system. In my case this was the <cite>Linux CentOS 6 x86_64 (64b) stable v5.3.0</cite> version. The file is called <code class="docutils literal notranslate"><span class="pre">freesurfer-Linux-centos6_x86_64-stable-pub-v5.3.0.tar.gz</span></code>.</p></li>
<li><p>Unpack FreeSurfer’s binary folder to the place where you want the software to be at. In my case, I want to install FreeSurfer at <code class="docutils literal notranslate"><span class="pre">/usr/local/freesurfer</span></code>, which in my case needs root privilege. In my case this all can be done with the following command:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo tar xzvf <span class="se">\</span>
    ~/Downloads/freesurfer-Linux-centos6_x86_64-stable-pub-v5.3.0.tar.gz
    -C /usr/local/
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>The usage of FreeSurfer requires a license file. Therefore, before you can use FreeSurfer, make sure to <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/registration.html">register</a>. The content of the license file looks something like this:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>username@gmail.com
<span class="m">12345</span>
 *A3zKO68mtFu5
</pre></div>
</div>
<p>This key has to be saved under a file with the name <cite>.license</cite> and has to be stored at your <code class="docutils literal notranslate"><span class="pre">$FREESURFER_HOME</span></code> location. In my case, this is <code class="docutils literal notranslate"><span class="pre">/usr/local/freesurfer</span></code>. To create this file in an Ubuntu environment use the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo gedit /usr/local/freesurfer/.license
</pre></div>
</div>
<p>Now copy the license code into this file, and save and close it.</p>
</div></blockquote>
</li>
<li><p>The last thing you have to do before you can use FreeSurfer is to tell your system where the software package is. To do this, add the following code to your <cite>.bashrc</cite> file:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#FreeSurfer</span>
<span class="nb">export</span> <span class="nv">FREESURFER_HOME</span><span class="o">=</span>/usr/local/freesurfer
<span class="nb">source</span> <span class="nv">$FREESURFER_HOME</span>/SetUpFreeSurfer.sh
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="test-freesurfer">
<h3>Test FreeSurfer<a class="headerlink" href="#test-freesurfer" title="Permalink to this headline">¶</a></h3>
<p>After setting everything up, we can test if FreeSurfer is set up correctly and run a test with the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#Test 1</span>
freeview -v <span class="nv">$SUBJECTS_DIR</span>/bert/mri/brainmask.mgz <span class="se">\</span>
         -v <span class="nv">$SUBJECTS_DIR</span>/bert/mri/aseg.mgz:colormap<span class="o">=</span>lut:opacity<span class="o">=</span><span class="m">0</span>.2 <span class="se">\</span>
         -f <span class="nv">$SUBJECTS_DIR</span>/bert/surf/lh.white:edgecolor<span class="o">=</span>yellow <span class="se">\</span>
         -f <span class="nv">$SUBJECTS_DIR</span>/bert/surf/rh.white:edgecolor<span class="o">=</span>yellow <span class="se">\</span>
         -f <span class="nv">$SUBJECTS_DIR</span>/bert/surf/lh.pial:annot<span class="o">=</span>aparc:edgecolor<span class="o">=</span>red <span class="se">\</span>
         -f <span class="nv">$SUBJECTS_DIR</span>/bert/surf/rh.pial:annot<span class="o">=</span>aparc:edgecolor<span class="o">=</span>red

<span class="c1">#Test 2</span>
tksurfer bert lh pial -curv -annot aparc.a2009s.annot
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On a new Ubuntu System this might lead to the following error: <code class="docutils literal notranslate"><span class="pre">freeview.bin:</span> <span class="pre">error</span> <span class="pre">while</span> <span class="pre">loading</span> <span class="pre">shared</span> <span class="pre">libraries:</span> <span class="pre">libjpeg.so.62:</span> <span class="pre">cannot</span> <span class="pre">open</span> <span class="pre">shared</span> <span class="pre">object</span> <span class="pre">file:</span> <span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code>. This is a common error on Ubuntu and can be solved with the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /usr/lib/x86_64-linux-gnu
sudo ln -s libjpeg.so.8 libjpeg.so.62
sudo ln -s libtiff.so.4 libtiff.so.3
</pre></div>
</div>
<p>Alternately, this error can sometimes also be overcome by installing the libjpeg62-dev package with the following command: <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">libjpeg62-dev</span></code></p>
</div>
</div>
</div>
<div class="section" id="matlab">
<h2>MATLAB<a class="headerlink" href="#matlab" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="_images/logoMatlab.png"><img alt="_images/logoMatlab.png" class="align-left" src="_images/logoMatlab.png" style="width: 70pt;" /></a>
<p>Nowadays almost all scientific fields take advantage of <a class="reference external" href="http://www.mathworks.com/">MATLAB</a>. Neuroscience is no exception in this and also some of Nipype’s recommended interfaces can (but don’t have to) take advantage of MATLAB, e.g. SPM, FSL, FreeSurfer.</p>
<p>Having MATLAB is always a good thing, and as I myself rely often on algorithms from the <a class="reference external" href="http://www.fil.ion.ucl.ac.uk/spm/">SPM</a> interface, I need it to be on my system. A detailed documentation on how to install MATLAB can be found <a class="reference external" href="http://www.mathworks.com/help/">here</a>. In my case, MATLAB is installed at the following location: <code class="docutils literal notranslate"><span class="pre">/usr/local/MATLAB/R2014a</span></code>.</p>
<p>The only thing you need to do to run MATLAB on your Ubuntu System is to add the following lines to your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#MATLAB</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/usr/local/MATLAB/R2014a/bin:<span class="nv">$PATH</span>
<span class="nb">export</span> <span class="nv">MATLABCMD</span><span class="o">=</span>/usr/local/MATLAB/R2014a/bin/glnxa64/MATLAB
</pre></div>
</div>
<p>To test if everything is set up correctly. Open a new Terminal and type in the command: “matlab”.</p>
</div>
<div class="section" id="spm12">
<h2>SPM12<a class="headerlink" href="#spm12" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="_images/logoSPM12.png"><img alt="_images/logoSPM12.png" class="align-right" src="_images/logoSPM12.png" style="width: 80pt;" /></a>
<p><a class="reference external" href="http://www.fil.ion.ucl.ac.uk/spm/">SPM</a> stands for Statistical Parametric Mapping and is probably one of the most widely-used neuroimaging analysis software package worldwide. SPM is based on MATLAB and therefore needs it to be installed on your system. Luckily, the previous step just made that sure.</p>
<p>As of 1st October 2014, SPM released it’s newest version <a class="reference external" href="http://www.fil.ion.ucl.ac.uk/spm/software/spm12/">SPM12</a>. The <a class="reference external" href="http://www.fil.ion.ucl.ac.uk/spm/software/spm12/SPM12_Release_Notes.pdf">Release Notes</a> mention some important updates and I therefore recommend to use <a class="reference external" href="http://www.fil.ion.ucl.ac.uk/spm/software/spm12/">SPM12</a> instead of <a class="reference external" href="http://www.fil.ion.ucl.ac.uk/spm/software/spm8/">SPM8</a>. Nonetheless, Nipype has no issue with either <a class="reference external" href="http://www.fil.ion.ucl.ac.uk/spm/software/spm8/">SPM8</a> or <a class="reference external" href="http://www.fil.ion.ucl.ac.uk/spm/software/spm12/">SPM12</a>. Therefore, you can install the version that you prefer.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is a standalone version of SPM available that doesn’t need MATLAB, but so far it isn’t recommended as a lot of additional toolboxes don’t work with the standalone, yet. For more information go on the <a class="reference external" href="https://en.wikibooks.org/wiki/SPM/Standalone">SPM wikipage</a>.</p>
</div>
<div class="section" id="id13">
<h3>Download and Installation<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p>To download and install the newest version <a class="reference external" href="http://www.fil.ion.ucl.ac.uk/spm/software/spm12/">SPM12</a> do as follows:</p>
<ol class="arabic">
<li><p>Got to SPM12’s <a class="reference external" href="http://www.fil.ion.ucl.ac.uk/spm/software/download/">Download and registration</a> page and fill out the form. Under <strong>Select SPM version required</strong>, chose SPM12 (or SPM8 if preferred) and download the zip file.</p></li>
<li><p>Now, unpack the zip file and copy the content to the recommended folder <code class="docutils literal notranslate"><span class="pre">/usr/local/MATLAB/R2014a/toolbox/</span></code> use the following code:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo unzip ~/Downloads/spm12.zip -d /usr/local/MATLAB/R2014a/toolbox/
</pre></div>
</div>
<p><strong>Note:</strong> You don’t have to put the spm12 folder into this folder, just make sure that you tell your system where to find it.</p>
</div></blockquote>
</li>
<li><p>Now tell your system where it can find SPM12 by adding the following line to your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#SPM12</span>
<span class="nb">export</span> <span class="nv">SPM_PATH</span><span class="o">=</span>/usr/local/MATLAB/R2014a/toolbox/spm12/
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Now, set up your MATLAB <code class="docutils literal notranslate"><span class="pre">startup.m</span></code> script so that MATLAB knows where SPM12 is stored at. If you’ve already installed FreeSurfer, than the <code class="docutils literal notranslate"><span class="pre">startup.m</span></code> file should be at <code class="docutils literal notranslate"><span class="pre">~/matlab/startup.m</span></code>. Otherwise create it and save it at this location. Now add the following code to this file:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>%-SPM12-
<span class="nv">spm_path</span> <span class="o">=</span> getenv<span class="o">(</span><span class="s1">&#39;SPM_PATH&#39;</span><span class="o">)</span><span class="p">;</span>
<span class="k">if</span> spm_path,
   addpath<span class="o">(</span>spm_path<span class="o">)</span><span class="p">;</span>
end
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are some interesting ways on how you can change the default behaviors of your SPM.</p>
<ul class="simple">
<li><p><strong>Example 1:</strong> By default, SPM uses only 64MB of memory during GLM estimation. This can be changed by changing the <code class="docutils literal notranslate"><span class="pre">defaults.stats.maxmem</span></code> parameter. Change this value to <code class="docutils literal notranslate"><span class="pre">2^29</span></code> and use 512MB or to <code class="docutils literal notranslate"><span class="pre">2^30</span></code> and use 1GB of memory during GLM estimation. Another option only available in SPM12 is to set <code class="docutils literal notranslate"><span class="pre">defaults.stats.resmem</span> <span class="pre">=</span> <span class="pre">true;</span></code>. Setting this parameter to true means that the temporary files during GLM estimation are kept in memory and not stored on disk (if value is set to false). For more information about increasing the speed of your SPM see the official <a class="reference external" href="https://en.wikibooks.org/wiki/SPM/Faster_SPM">Faster SPM</a> section.</p></li>
<li><p><strong>Example 2</strong>: One computational unimportant but nice parameter to change is <code class="docutils literal notranslate"><span class="pre">defaults.ui.colour</span> <span class="pre">=</span> <span class="pre">[0.141</span> <span class="pre">0</span> <span class="pre">0.848];</span></code>. Change it to the recommended value and see the nice color change in your SPM GUI.</p></li>
</ul>
<p><strong>How to change those values:</strong> SPM8 and SPM12 differ a bit in how those changes have to be implemented. In SPM8 you can change the default behavior by directly changing the parameters in the <code class="docutils literal notranslate"><span class="pre">spm_defaults.m</span></code> file, stored in the <code class="docutils literal notranslate"><span class="pre">spm8</span></code> folder. If you want to change default values in SPM12, you should create a new file called <code class="docutils literal notranslate"><span class="pre">spm_my_defaults.m</span></code>, store it in your <code class="docutils literal notranslate"><span class="pre">spm12</span></code> folder. The first line of your <code class="docutils literal notranslate"><span class="pre">spm_my_defaults.m</span></code> file has to be <code class="docutils literal notranslate"><span class="pre">global</span> <span class="pre">defaults</span></code>, followed by all the parameters you want to change, e.g. <code class="docutils literal notranslate"><span class="pre">defaults.ui.colour</span> <span class="pre">=</span> <span class="pre">[0.141</span> <span class="pre">0</span> <span class="pre">0.848];</span></code></p>
</div>
</div>
<div class="section" id="test-spm12">
<h3>Test SPM12<a class="headerlink" href="#test-spm12" title="Permalink to this headline">¶</a></h3>
<p>To test if SPM12 is set up correctly, open MATLAB and type in the command <code class="docutils literal notranslate"><span class="pre">spm</span> <span class="pre">fmri</span></code>. This can also be achieved in one command: <code class="docutils literal notranslate"><span class="pre">matlab</span> <span class="pre">-r</span> <span class="pre">&quot;spm</span> <span class="pre">fmri&quot;</span></code>.</p>
</div>
</div>
<div class="section" id="ants">
<h2>ANTs<a class="headerlink" href="#ants" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="_images/logoANTS.png"><img alt="_images/logoANTS.png" class="align-left" src="_images/logoANTS.png" style="width: 70pt;" /></a>
<p><a class="reference external" href="http://stnava.github.io/ANTs/">ANTs</a> stands for Advanced Normalization Tools and is a great software package for registration, segmentation and normalization of MRI data. I highly recommend to use ANTs for the normalization of your data. <strong>Side note</strong>: ANTs can also be used to create a very cool looking average brain (template) out of a your own population of subjects.</p>
<p>There are two ways how you can set up ANTS on your own system:</p>
<p>The <strong>first</strong> way is very fast and simple. Just download the newest release of ANTs from their <a class="reference external" href="https://github.com/stnava/ANTs/releases">official github homepage</a>. Decompress the downloaded files and store them somewhere on your system, e.g. under <code class="docutils literal notranslate"><span class="pre">/usr/local/antsbin</span></code>. After you’ve done that, just add the following line to your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file so that your system knows where to find the ANTs binaries:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#ANTs</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/usr/local/antsbin/bin:<span class="nv">$PATH</span>
<span class="nb">export</span> <span class="nv">ANTSPATH</span><span class="o">=</span>/usr/local/antsbin/bin/
</pre></div>
</div>
</div></blockquote>
<p>The <strong>second</strong> way to get ANTs on your system takes a bit longer, but guarantees that you have the newest version of ANTs, specifically compiled for your system. Do as follows:</p>
<ol class="arabic">
<li><p>Download the data from the official homepage <a class="reference external" href="http://stnava.github.io/ANTs/">http://stnava.github.io/ANTs/</a>. I chose the “Download TAR Ball” option.</p></li>
<li><p>Unpack the just downloaded files to a subfolder in your download folder (or wherever you want) with the following command:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>tar xzvf ~/Downloads/stnava-ANTs-b4eb279.tar.gz -C ~/Downloads
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>The installation of ANTs differs from other installation by the fact that the software first has to be compiled before it can run on your system. The code has to be compiled to create the binary files specific for your system. To do this, we first need to create a temporary folder to store all important files. This can bed one with the following code:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>mkdir ~/Downloads/stnava-ANTs-b4eb279/antsbin
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Go into this folder with <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">~/Downloads/stnava-ANTs-b4eb279/antsbin</span></code> and proceed with the following steps:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#1. Install ccmake and other dependencies to be able to compile the code</span>
sudo apt-get install cmake-curses-gui build-essential zlib1g-dev

<span class="c1">#2.</span>
ccmake ../../stnava-ANTs-b4eb279

<span class="c1">#3. Press the [c] button to configure the compilation options</span>

<span class="c1">#4. Change the CMAKE_INSTALL_PREFIX value to /usr/local/antsbin</span>

<span class="c1">#5. First press the [c] and than the [g] button to generate the code</span>

<span class="c1">#6. Now everything is set up to compile the code</span>
make -j <span class="m">4</span>

<span class="c1">#7. Now you&#39;re ready to install ANTs with the following commands:</span>
<span class="nb">cd</span> ANTS-build/
sudo make install

<span class="c1">#8. Use the following command to copy important scripts from</span>
<span class="c1">#   the ANTs folder &#39;stnava-ANTs-b4eb279/Scripts&#39; into the folder</span>
<span class="c1">#   where you&#39;ve stored the ANTs binaries</span>
sudo cp ~/Downloads/stnava-ANTs-b4eb279/Scripts/* /usr/local/antsbin/bin/

<span class="c1">#9. Now that everything is done you can delete the temporary folder</span>
<span class="c1">#   &#39;stnava-ANTs-b4eb279&#39; again.</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Just one last thing before your can run ANTs, add the following lines to your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#ANTs</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/usr/local/antsbin/bin:<span class="nv">$PATH</span>
<span class="nb">export</span> <span class="nv">ANTSPATH</span><span class="o">=</span>/usr/local/antsbin/bin/
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="afni">
<h2>AFNI<a class="headerlink" href="#afni" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="_images/logoAFNI.png"><img alt="_images/logoAFNI.png" class="align-left" src="_images/logoAFNI.png" style="width: 70pt;" /></a>
<p><a class="reference external" href="https://afni.nimh.nih.gov/afni/">AFNI</a> is an open source software package specialized on the analysis of functional MRI. To see a list of all AFNI algorithms that can be used with Nipype go to <a class="reference external" href="http://nipype.readthedocs.io/en/latest/interfaces/generated/nipype.interfaces.afni.preprocess.html">interfaces.afni.preprocess</a>.</p>
<p>If you’ve installed the NeuroDebian repository, just use the following command to install AFNI on your system: <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">afni</span></code></p>
<p>To be able to run AFNI make sure to add the following lines of code to your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#AFNI</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/usr/lib/afni/bin:<span class="nv">$PATH</span>
</pre></div>
</div>
</div>
<div class="section" id="additional-interfaces">
<h2>Additional interfaces<a class="headerlink" href="#additional-interfaces" title="Permalink to this headline">¶</a></h2>
<p>There are many additional interfaces, such as <a class="reference external" href="http://camino.cs.ucl.ac.uk/">Camino</a>, <a class="reference external" href="http://www.brain.org.au/software/mrtrix/index.html">MRtrix</a>, <a class="reference external" href="http://slicer.org/">Slicer</a>, <a class="reference external" href="http://www.connectomics.org/viewer/">ConnectomeViewer</a>, for which I haven’t created an installation guide yet. This is also due to my lack of knowledge about them. Feel free to help me to complete this list.</p>
</div>
</div>
<div class="section" id="clean-up-your-system">
<h1>Clean up your System<a class="headerlink" href="#clean-up-your-system" title="Permalink to this headline">¶</a></h1>
<p>Now that everything is downloaded and installed, make sure that everything is correctly updated with the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#Update and upgrade your system</span>
sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get upgrade

<span class="c1">#Optional 1: Upgrade your distribution with</span>
sudo apt-get dist-upgrade

<span class="c1">#Optional 2: Clean your system and remove unused packages</span>
sudo apt-get autoremove <span class="o">&amp;&amp;</span> sudo apt-get autoclean
sudo apt-get remove <span class="o">&amp;&amp;</span> sudo apt-get clean
</pre></div>
</div>
</div>
<div class="section" id="test-your-system">
<h1>Test your System<a class="headerlink" href="#test-your-system" title="Permalink to this headline">¶</a></h1>
<p>Nipype is installed, recommended interfaces are ready to go and so are you. But before you want to start your first steps with Nipype, I recommend you to test your system first. To do this open up an IPython environment (open a terminal and start IPython with the command <code class="docutils literal notranslate"><span class="pre">ipython</span></code>) and run the following code:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import the nipype module</span>
<span class="kn">import</span> <span class="nn">nipype</span>

<span class="c1"># Optional: Use the following lines to increase verbosity of output</span>
<span class="n">nipype</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;logging&#39;</span><span class="p">,</span> <span class="s1">&#39;workflow_level&#39;</span><span class="p">,</span>  <span class="s1">&#39;CRITICAL&#39;</span><span class="p">)</span>
<span class="n">nipype</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;logging&#39;</span><span class="p">,</span> <span class="s1">&#39;interface_level&#39;</span><span class="p">,</span> <span class="s1">&#39;CRITICAL&#39;</span><span class="p">)</span>
<span class="n">nipype</span><span class="o">.</span><span class="n">logging</span><span class="o">.</span><span class="n">update_logging</span><span class="p">(</span><span class="n">nipype</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>

<span class="c1"># Run the test: Increase verbosity parameter for more info</span>
<span class="n">nipype</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">doctests</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>This test can take some minutes but if all goes well you will get an output more or less like this:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">Ran</span> <span class="mi">7454</span> <span class="n">tests</span> <span class="ow">in</span> <span class="mf">71.160</span><span class="n">s</span>

<span class="n">OK</span> <span class="p">(</span><span class="n">SKIP</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="o">&lt;</span><span class="n">nose</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">TextTestResult</span> <span class="n">run</span><span class="o">=</span><span class="mi">7454</span> <span class="n">errors</span><span class="o">=</span><span class="mi">0</span> <span class="n">failures</span><span class="o">=</span><span class="mi">0</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Don’t worry if some modules are being skipped or some side modules show up as errors or failures during the run. As long as no main modules cause any problems, you’re fine. The number of tests and time will vary depending on which interfaces you have installed on your system. But if you receive an <code class="docutils literal notranslate"><span class="pre">OK</span></code>, <code class="docutils literal notranslate"><span class="pre">errors=0</span></code> and <code class="docutils literal notranslate"><span class="pre">failures=0</span></code> then everything is ready.</p>
<p><strong>Congratulation! You now have a system with a fully working Nipype environment. Have fun!</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The first time I used MATLAB in Nipype I got the following error message:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Standard error:
MATLAB code threw an exception:
SPM not in matlab path
File:/home/username/workingdir/sliceTiming/pyscript_slicetiming.m
Name:pyscript_slicetiming
Line:6
Return code: 0
Interface MatlabCommand failed to run.
Interface SliceTiming failed to run.
</pre></div>
</div>
<p>As mentioned in the error message <cite>SPM not in matlab path</cite>, Nipype can’t find the path to SPM. To change that, you can either add <code class="docutils literal notranslate"><span class="pre">addpath</span> <span class="pre">/usr/local/MATLAB/R2014a/toolbox/spm12b</span></code> to your <code class="docutils literal notranslate"><span class="pre">startup.m</span></code> file, stored at <code class="docutils literal notranslate"><span class="pre">~/matlab/startup.m</span></code> or add the following line of code at the beginning of your Nipype script:</p>
<blockquote>
<div><div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nipype.interfaces.matlab</span> <span class="kn">import</span> <span class="n">MatlabCommand</span>
<span class="n">MatlabCommand</span><span class="o">.</span><span class="n">set_default_paths</span><span class="p">(</span><span class="s1">&#39;/usr/local/MATLAB/R2014a/toolbox/spm12b&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>



          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="prepareData.html" title="Prepare your Dataset"
             >next</a></li>
        <li class="right" >
          <a href="nipypeAndNeuroimaging.html" title="Nipype and Neuroimaging"
             >previous</a> |</li>
        <li><a href="index.html">Home</a>|</li>
        <li><a href="http://miykael.github.com/nipype-beginner-s-guide/tableofcontent.html">Table of Contents</a>|</li>
        <li><a href="http://miykael.github.com/nipype-beginner-s-guide/faq.html">FAQ</a>|</li>
        <li><a href="http://miykael.github.com/nipype-beginner-s-guide/glossary.html">Glossary</a>|</li>
        <li><a href="https://github.com/miykael/nipype-beginner-s-guide/">github</a>|</li>
        <li><a href="http://nipy.org/nipype/">Nipype</a>|</li>
        <li><a href="http://miykael.github.io/nipype-beginner-s-guide/help.html">Help</a>|</li> 
      </ul>
    </div>
    <div class="footer">
    <p>
        &copy; Copyright 2016, Michael Notter.
      Last updated on June 10, 2021.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 3.2.1.
    </p>
    <p>
    This page uses <a href="http://analytics.google.com/">Google Analytics</a> to collect statistics. You can disable it by blocking the JavaScript coming from www.google-analytics.com.
    </p>
    </div>
  </body>
</html>